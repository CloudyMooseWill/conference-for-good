<div class="container" [class.page-transition]="transitionService.isTransitioning()">
  <div class="row">
    <h1 class="text-center">Hello, {{speaker.nameFirst}}!</h1>
    <p class="text-center">Please contact Brooke Meyer at <a (click)="email()" class="contact">bmeyer@genesisshelter.org</a> or <a (click)="call()" class="contact">214-399-7733</a> if you have any questions or issues.</p>
  </div>

  <div class="divider"></div>

  <div class="row block">
    <h3 class="text-center title">Things I Can Do</h3>
    <div class="col-md-4 col-xs-12 action-item">
      <button class="btn btn-primary center-block" (click)="goto('profile')">Modify my profile information</button>
    </div>
    <div class="col-md-4 col-xs-12 action-item">
      <button class="btn btn-primary center-block" (click)="goto('proposal')">Submit Presentation Proposal</button>
    </div>
    <div class="col-md-4 col-xs-12 action-item">
      <button class="btn btn-primary center-block" (click)="copresLinkJump()">Add co-presenters</button>
    </div>
  </div>

  <div class="divider"></div>

  <div class="row">
    <h3 class="text-center title">My Information</h3>
    <div class="col-xs-12">

      <div class="col-xs-12 col-md-6">
        <div class="dashboard-item">
          <b>My Scheduled Presentations</b>
          <div class="dashboard-list">
            <div *ngFor="let session of scheduledSessions">
              <div *ngIf="session.speakers?.mainPresenter === speaker._id"><a [routerLink]="['/session', {id: session._id}]">{{ session.title }}</a></div>
              <div *ngIf="session.speakers?.mainPresenter !== speaker._id">{{ session.title }}</div>
              <div *ngIf="session.speakers?.coPresenters?.length > 0" class="copres-list">
                <div><i>Copresenters:</i></div>
                <div *ngFor="let coPres of speakerService.getSpeakerList(session.speakers).coPresenters">
                  <i class="fa fa-ban delete" (click)="removeCopres(session._id, coPres._id)"></i>
                  {{ coPres.nameFirst }} {{ coPres.nameLast }}
                </div>
              </div>
              <div><i>Currently Scheduled for: </i></div>
              <div *ngFor="let occurrence of session.statusTimeLocation">
                {{ getPart(session, occurrence) }}{{ getDate(occurrence) | dateCustom }} from {{ slot(occurrence)?.start | time }} to {{ slot(occurrence)?.end | time }} in {{ occurrence.room }}
              </div>
              <div class="divider-s"></div>
            </div>
          </div>
        </div>
        <div class="dashboard-item">
          <b>My Arrangements</b>

          <div>
            <!-- TODO: we can make this a link to a page with speaker agreement info, check with brooke -->
            <p class="text-danger">Speaker Agreement</p>
          </div>
        </div>
      </div>

      <div class="col-xs-12 col-md-6">
        <div class="dashboard-item">
          <b>Action Required</b>

          <div>
            <div *ngIf="speaker.profileComplete && incompleteSessions.length === 0">None</div>
            <div *ngIf="!speaker.profileComplete"><a [routerLink]="['/speaker', {id: speaker._id}]">Profile Incomplete</a></div>
            <div *ngIf="incompleteSessions.length > 0">
              <div class="small-pad" *ngFor="let session of incompleteSessions">
                <a [routerLink]="['/session', {id: session._id}]">Incomplete Session: {{ session.title }}</a>
              </div>
            </div>
            <div *ngIf="!speaker.responseForm">
              <a [routerLink]="['/response', {id: speaker._id}]">Speaker Response Form</a>
            </div>
            
          </div>
        </div>

        <div class="dashboard-item">
          <b>My Presentation Proposals</b>
          <div class="dashboard-list">
            <div *ngFor="let session of pendingSessions">
              <div *ngIf="session.speakers?.mainPresenter === speaker._id"><a [routerLink]="['/session', {id: session._id}]">{{ session.title }}</a></div>
              <div *ngIf="session.speakers?.mainPresenter !== speaker._id">{{ session.title }}</div>
              <div class="small-pad"><i>Status: </i> {{ session.approval }}</div>
              <div class="small-pad" *ngIf="session.speakers?.coPresenters?.length > 0" class="copres-list">
                <div><i>Copresenters:</i></div>
                <div *ngFor="let coPres of speakerService.getSpeakerList(session.speakers).coPresenters">
                  <i *ngIf="session.speakers?.mainPresenter === speaker._id" class="fa fa-ban delete" (click)="removeCopres(session._id, coPres._id)"></i>
                  {{ coPres.nameFirst }} {{ coPres.nameLast }}
                </div>
              </div>
              <div class="divider-s"></div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="divider"></div>

  <div #copresLink class="row adding-copres">
    <div class="block">
      <p>
        Please select co-presenters for presentations which you have submitted.
        If they have not made an account, you can start one for them, and they will receive
        an email asking them to finish making the account.
      </p>
      <div class="row">
        <div class="col-xs-6 box">
          <p>
            Select the presentation you’d like to add a co-presenter to. <br/>
            <b>If this list is empty, please complete a presentation proposal first.</b>
          </p>
          <select #sessions class="form-control" id="sessions">
            <option *ngFor="let session of leadOnlySessions"
                    [value]="session._id">
                {{ session.title }}
            </option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4 col-xs-12 existing-copres">
          <p>Please select a co-presenter from the list below or select ‘Create New Co-Presenter’.</p>
          <select #speakers class="form-control" id="speakers">
            <option *ngFor="let speaker of (speakerService.speakers | async)"
                    [value]="speaker._id">
              {{ speaker.nameFirst }} {{ speaker.nameLast }}
            </option>
          </select>
          <button class="btn btn-primary" (click)="addCopres(sessions.value, speakers.value)">Add Co-presenter</button>
        </div>
        <div class="col-md-6 col-md-offset-1 col-xs-12 new-copres box">
          <button class="btn btn-primary" (click)="goto('copres')">Create New Co-Presenter</button>
          <div class="copres-text">
            <b>Once you create a new co-presenter, <u>you must return to this page to add them to the appropriate
            presentation.</u></b> They will receive an email asking them to finish creating their
            account.
          </div>
          <div>You only need to fill out their name and email if you don't know more right now.</div>
        </div>
      </div>
    </div>
  </div>

  <toast #toast></toast>
</div>